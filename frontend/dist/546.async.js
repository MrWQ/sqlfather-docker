"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[546],{95546:function(le,W,t){t.d(W,{Z:function(){return de}});var V=t(42122),s=t.n(V),Y=t(27424),l=t.n(Y),f=t(17061),J=t.n(f),Z=t(17156),ae=t.n(Z),E=t(7189),P=t(93351),p=t(18036),h=t(48086),b=t(38272),m=t(71577),v=t(4914),D=t(19650),I=t(60331),Q=t(27049),L=t(20294),k=t(24565),B=t(20640),H=t.n(B),o=t(62435),n=t(86074),_=function(c){var w=c.dataList,X=c.pagination,U=c.loading,x=c.showTag,$=x===void 0?!0:x,A=c.onImport,F=(0,o.useState)(!1),G=l()(F,2),q=G[0],M=G[1],ee=(0,o.useState)(0),R=l()(ee,2),te=R[0],z=R[1],ne=(0,p.useModel)("@@initialState"),j=ne.initialState,K=j==null?void 0:j.loginUser,N=function(){var O=ae()(J()().mark(function i(g){var y;return J()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(y=h.ZP.loading("\u6B63\u5728\u5220\u9664"),g){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,P.U3)({id:g});case 6:h.ZP.success("\u64CD\u4F5C\u6210\u529F"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),h.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+a.t0.message);case 12:return a.prev=12,y(),a.finish(12);case 15:case"end":return a.stop()}},i,null,[[3,9,12,15]])}));return function(g){return O.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"table-info-list",children:[(0,n.jsx)(b.ZP,{itemLayout:"vertical",size:"large",loading:U,pagination:X,dataSource:w,renderItem:function(i,g){var y,S=JSON.parse(i.content);return(0,n.jsxs)(b.ZP.Item,{extra:A&&(0,n.jsx)(m.Z,{onClick:function(){A(i)},children:"\u5BFC\u5165"}),children:[(0,n.jsxs)(v.Z,{title:(0,n.jsxs)(D.Z,{align:"center",children:[(0,n.jsx)("div",{children:i.name}),(0,n.jsxs)("div",{children:[$&&i.reviewStatus===1&&(0,n.jsx)(I.Z,{color:"success",children:"\u516C\u5F00"}),i.userId===1&&(0,n.jsx)(I.Z,{color:"gold",children:"\u5B98\u65B9"})]})]}),column:2,children:[(0,n.jsx)(v.Z.Item,{label:"\u8868\u540D",children:S.tableName}),(0,n.jsx)(v.Z.Item,{label:"\u8868\u6CE8\u91CA",children:(y=S.tableComment)!==null&&y!==void 0?y:"\u65E0"}),(0,n.jsx)(v.Z.Item,{label:"\u5B57\u6BB5\u5217\u8868",children:S.fieldList.map(function(a){return a.fieldName}).join(", ")})]}),(0,n.jsxs)(D.Z,{split:(0,n.jsx)(Q.Z,{type:"vertical"}),style:{fontSize:14},children:[(0,n.jsx)(L.Z.Text,{type:"secondary",children:i.createTime.toString().split("T")[0]}),(0,n.jsx)(m.Z,{type:"text",onClick:function(){(0,P.RY)(i.id).then(function(C){H()(C.data),h.ZP.success("\u590D\u5236\u5EFA\u8868 SQL \u6210\u529F")}).catch(function(C){h.ZP.error("\u590D\u5236\u5931\u8D25\uFF0C"+C.message)})},children:"\u590D\u5236\u8BED\u53E5"}),(0,n.jsx)(m.Z,{type:"text",onClick:function(){z(i.id),M(!0)},children:"\u4E3E\u62A5"}),K&&K.id===i.userId&&(0,n.jsx)(k.Z,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u4E48\uFF1F",onConfirm:function(){N(i.id)},children:(0,n.jsx)(m.Z,{type:"text",danger:!0,children:"\u5220\u9664"})})]})]},g)}}),(0,n.jsx)(E.Z,{visible:q,reportedId:te,onClose:function(){M(!1)}})]})},r=_,u=t(91894),d=t(4107),e=t(14277),se=10,oe=function(c){var w=c.title,X=w===void 0?"\u8868\u4FE1\u606F\u5217\u8868":w,U=c.needLogin,x=U===void 0?!1:U,$=c.showTag,A=$===void 0?!0:$,F=c.onLoad,G=c.onImport,q=(0,o.useState)([]),M=l()(q,2),ee=M[0],R=M[1],te=(0,o.useState)(0),z=l()(te,2),ne=z[0],j=z[1],K=(0,o.useState)(!0),N=l()(K,2),O=N[0],i=N[1],g={current:1,pageSize:se,sortField:"createTime",sortOrder:"descend"},y=(0,o.useState)(g),S=l()(y,2),a=S[0],C=S[1],fe=(0,p.useModel)("@@initialState"),re=fe.initialState,ue=re==null?void 0:re.loginUser,pe=function(){(0,P.zr)(s()(s()({},a),{},{reviewStatus:1})).then(function(T){R(T.data.records),j(T.data.total)}).catch(function(T){h.ZP.error("\u52A0\u8F7D\u5931\u8D25\uFF0C"+T.message)})};return(0,o.useEffect)(function(){x&&!ue||(i(!0),F?F(a,R,j):pe(),i(!1))},[a]),(0,n.jsx)("div",{className:"table-info-card",children:(0,n.jsx)(u.Z,{title:X,extra:(0,n.jsx)(p.Link,{to:"/",children:(0,n.jsx)(m.Z,{type:"primary",children:"\u521B\u5EFA\u8868"})}),children:!x||ue?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{children:(0,n.jsx)(d.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",enterButton:"\u641C\u7D22",onSearch:function(T){C(s()(s()({},g),{},{name:T}))}})}),(0,n.jsx)(r,{pagination:{total:ne,onChange:function(T){C(s()(s()({},a),{},{current:T})),window.scrollTo({top:0})},pageSize:se},showTag:A,dataList:ee,loading:O,onImport:G})]}):(0,n.jsx)(e.Z,{description:(0,n.jsx)(p.Link,{to:"/user/login",children:(0,n.jsx)(m.Z,{type:"primary",ghost:!0,style:{marginTop:8},children:"\u8BF7\u5148\u767B\u5F55"})})})})})},de=oe},93351:function(le,W,t){t.d(W,{RY:function(){return n},SC:function(){return P},U3:function(){return H},ee:function(){return D},fZ:function(){return k},kP:function(){return Q},v4:function(){return h},zr:function(){return m}});var V=t(17061),s=t.n(V),Y=t(17156),l=t.n(Y),f=t(18036);function J(r){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/table_info/list",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function ae(r){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/table_info/my/list",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}function P(r){return p.apply(this,arguments)}function p(){return p=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/my/add/list/page",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function h(r){return b.apply(this,arguments)}function b(){return b=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/my/list/page",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function m(r){return v.apply(this,arguments)}function v(){return v=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/list/page",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function D(r){return I.apply(this,arguments)}function I(){return I=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/add",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),I.apply(this,arguments)}function Q(r){return L.apply(this,arguments)}function L(){return L=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/get",{method:"GET",params:{id:u}}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function k(r){return B.apply(this,arguments)}function B(){return B=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/update",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function H(r){return o.apply(this,arguments)}function o(){return o=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/delete",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function n(r){return _.apply(this,arguments)}function _(){return _=l()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/generate/sql",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),_.apply(this,arguments)}}}]);
