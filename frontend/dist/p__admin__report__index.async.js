"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[850],{25307:function(J,F,n){n.r(F),n.d(F,{default:function(){return re}});var G=n(42122),c=n.n(G),L=n(17061),a=n.n(L),Z=n(17156),g=n.n(Z),U=n(27424),O=n.n(U),R=n(32966),$=n(79864),i=n(48086),K=n(19650),V=n(27049),I=n(20294),k=n(24565),o=n(71577),d=n(62435),T=n(50146),e=n(86074),H=function(){var M=g()(a()().mark(function u(p){var f;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f=i.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,(0,R.cq)(c()({},p));case 4:return f(),i.ZP.success("\u6DFB\u52A0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),f(),i.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},u,null,[[1,9]])}));return function(p){return M.apply(this,arguments)}}(),N=function(u){var p=u.modalVisible,f=u.columns,y=u.onSubmit,r=u.onCancel;return(0,e.jsx)(T.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",open:p,onCancel:function(){return r()},footer:null,children:(0,e.jsx)($.QVr,{onSubmit:function(){var b=g()(a()().mark(function D(j){var B;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,H(j);case 2:B=S.sent,B&&(y==null||y());case 4:case"end":return S.stop()}},D)}));return function(D){return b.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:f})})},X=N,Y=function(){var M=g()(a()().mark(function u(p){var f;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f=i.ZP.loading("\u6B63\u5728\u66F4\u65B0"),r.prev=1,r.next=4,(0,R.Pt)(p);case 4:return f(),i.ZP.success("\u66F4\u65B0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),f(),i.ZP.error("\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},u,null,[[1,9]])}));return function(p){return M.apply(this,arguments)}}(),x=function(u){var p=u.oldData,f=u.columns,y=u.modalVisible,r=u.onSubmit,b=u.onCancel;return(0,e.jsx)(T.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:y,onCancel:function(){return b()},footer:null,children:(0,e.jsx)($.QVr,{onSubmit:function(){var D=g()(a()().mark(function j(B){var A;return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Y(c()(c()({},B),{},{id:p.id}));case 2:A=E.sent,A&&(r==null||r());case 4:case"end":return E.stop()}},j)}));return function(j){return D.apply(this,arguments)}}(),rowKey:"id",type:"form",form:{initialValues:p},columns:f})})},q=x,ee=function(){var u=(0,d.useState)(!1),p=O()(u,2),f=p[0],y=p[1],r=(0,d.useState)(!1),b=O()(r,2),D=b[0],j=b[1],B=(0,d.useState)({}),A=O()(B,2),S=A[0],E=A[1],W=(0,d.useRef)(),ne={0:{text:"\u672A\u5904\u7406"},1:{text:"\u5DF2\u5904\u7406"}},ae=function(){var v=g()(a()().mark(function C(s){var m,h;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m=i.ZP.loading("\u6B63\u5728\u5220\u9664"),s!=null&&s.id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,R.GR)({id:s.id});case 6:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),(h=W.current)===null||h===void 0||h.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+t.t0.message);case 13:return t.prev=13,m(),t.finish(13);case 16:case"end":return t.stop()}},C,null,[[3,10,13,16]])}));return function(s){return v.apply(this,arguments)}}(),Q=function(){var v=g()(a()().mark(function C(s,m){var h,P;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return h=i.ZP.loading("\u5904\u7406\u4E2D"),l.prev=1,l.next=4,(0,R.Pt)({id:s.id,status:m});case 4:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),(P=W.current)===null||P===void 0||P.reload(),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),i.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+l.t0.message);case 11:return l.prev=11,h(),l.finish(11);case 14:case"end":return l.stop()}},C,null,[[1,8,11,14]])}));return function(s,m){return v.apply(this,arguments)}}(),_=[{title:"id",dataIndex:"id",valueType:"index"},{title:"\u88AB\u4E3E\u62A5\u5BF9\u8C61",dataIndex:"reportedId",valueType:"textarea"},{title:"\u5185\u5BB9",dataIndex:"content",valueType:"textarea"},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"status",valueEnum:ne},{title:"\u88AB\u4E3E\u62A5\u4EBA",dataIndex:"reportedUserId",hideInForm:!0},{title:"\u4E3E\u62A5\u4EBA",dataIndex:"userId",valueType:"text",hideInForm:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInForm:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(C,s){return(0,e.jsxs)(K.Z,{split:(0,e.jsx)(V.Z,{type:"vertical"}),children:[(0,e.jsx)(I.Z.Link,{onClick:function(){E(s),j(!0)},children:"\u4FEE\u6539"}),s.status!==1&&(0,e.jsx)(I.Z.Link,{onClick:function(){Q(s,1)},children:"\u5904\u7406"}),s.status===1&&(0,e.jsx)(I.Z.Link,{onClick:function(){Q(s,0)},children:"\u672A\u5904\u7406"}),(0,e.jsx)(k.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u4E48\uFF1F",onConfirm:function(){return ae(s)},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(I.Z.Link,{type:"danger",children:"\u5220\u9664"})})]})}}];return(0,e.jsxs)($._zJ,{children:[(0,e.jsx)($.QVr,{headerTitle:"\u8BCD\u6761\u7BA1\u7406",actionRef:W,rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},toolBarRender:function(){return[(0,e.jsx)(o.Z,{type:"primary",onClick:function(){return y(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var v=g()(a()().mark(function C(s,m){var h,P,t,l,z;return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:h=c()({},s);for(P in m)h.sortField=P,h.sortOrder=m[P];return w.next=4,(0,R.I3)(h);case 4:return t=w.sent,l=t.data,z=t.code,w.abrupt("return",{data:(l==null?void 0:l.records)||[],success:z===0,total:l.total});case 8:case"end":return w.stop()}},C)}));return function(C,s){return v.apply(this,arguments)}}(),columns:_}),(0,e.jsx)(X,{modalVisible:f,columns:_,onSubmit:function(){},onCancel:function(){return y(!1)}}),(0,e.jsx)(q,{modalVisible:D,oldData:S,columns:_,onSubmit:function(){},onCancel:function(){return j(!1)}})]})},re=ee},32966:function(J,F,n){n.d(F,{GR:function(){return I},I3:function(){return g},Pt:function(){return K},cq:function(){return O}});var G=n(17061),c=n.n(G),L=n(17156),a=n.n(L),Z=n(18036);function g(o){return U.apply(this,arguments)}function U(){return U=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/list/page",{method:"GET",params:d}));case 1:case"end":return e.stop()}},o)})),U.apply(this,arguments)}function O(o){return R.apply(this,arguments)}function R(){return R=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/add",{method:"POST",headers:{"Content-Type":"application/json"},data:d}));case 1:case"end":return e.stop()}},o)})),R.apply(this,arguments)}function $(o){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function o(d){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/report/get",{method:"GET",params:{id:d}}));case 1:case"end":return e.stop()}},o)})),i.apply(this,arguments)}function K(o){return V.apply(this,arguments)}function V(){return V=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/update",{method:"POST",headers:{"Content-Type":"application/json"},data:d}));case 1:case"end":return e.stop()}},o)})),V.apply(this,arguments)}function I(o){return k.apply(this,arguments)}function k(){return k=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/delete",{method:"POST",headers:{"Content-Type":"application/json"},data:d}));case 1:case"end":return e.stop()}},o)})),k.apply(this,arguments)}}}]);
