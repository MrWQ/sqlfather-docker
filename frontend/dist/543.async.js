"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[543],{9543:function(oe,Q,t){t.d(Q,{Z:function(){return ce}});var X=t(42122),i=t.n(X),H=t(27424),u=t.n(H),h=t(17061),Y=t.n(h),P=t(17156),ie=t.n(P),_=t(7189),x=t(91154),m=t(18036),v=t(48086),F=t(38272),g=t(71577),o=t(4914),D=t(19650),Z=t(60331),se=t(27049),L=t(20294),k=t(24565),M=t(20640),q=t.n(M),d=t(62435),n=t(86074),R=function(f){var w=f.dataList,ee=f.pagination,G=f.loading,A=f.showTag,b=A===void 0?!0:A,K=f.onImport,N=(0,d.useState)(!1),W=u()(N,2),ne=W[0],$=W[1],te=(0,d.useState)(0),O=u()(te,2),re=O[0],z=O[1],ae=(0,m.useModel)("@@initialState"),C=ae.initialState,V=C==null?void 0:C.loginUser,J=function(){var U=ie()(Y()().mark(function l(y){var S;return Y()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(S=v.ZP.loading("\u6B63\u5728\u5220\u9664"),y){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,x.G9)({id:y});case 6:v.ZP.success("\u64CD\u4F5C\u6210\u529F"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),v.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+a.t0.message);case 12:return a.prev=12,S(),a.finish(12);case 15:case"end":return a.stop()}},l,null,[[3,9,12,15]])}));return function(y){return U.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"field-info-list",children:[(0,n.jsx)(F.ZP,{itemLayout:"vertical",size:"large",loading:G,pagination:ee,dataSource:w,renderItem:function(l,y){var S,j,a,E,p=JSON.parse(l.content);return(0,n.jsxs)(F.ZP.Item,{extra:K&&(0,n.jsx)(g.Z,{onClick:function(){K(l)},children:"\u5BFC\u5165"}),children:[(0,n.jsxs)(o.Z,{title:(0,n.jsxs)(D.Z,{align:"center",children:[(0,n.jsx)("div",{children:l.name}),(0,n.jsxs)("div",{children:[b&&l.reviewStatus===1&&(0,n.jsx)(Z.Z,{color:"success",children:"\u516C\u5F00"}),l.userId===1&&(0,n.jsx)(Z.Z,{color:"gold",children:"\u5B98\u65B9"})]})]}),column:3,children:[(0,n.jsx)(o.Z.Item,{label:"\u5B57\u6BB5\u540D",children:p.fieldName}),(0,n.jsx)(o.Z.Item,{label:"\u7C7B\u578B",children:(S=p.fieldType)!==null&&S!==void 0?S:"\u65E0"}),(0,n.jsx)(o.Z.Item,{label:"\u6CE8\u91CA",children:(j=p.comment)!==null&&j!==void 0?j:"\u65E0"}),(0,n.jsx)(o.Z.Item,{label:"\u9ED8\u8BA4\u503C",children:(a=p.defaultValue)!==null&&a!==void 0?a:"\u65E0"}),(0,n.jsx)(o.Z.Item,{label:"\u81EA\u589E",children:p.autoIncrement?"\u662F":"\u5426"}),(0,n.jsx)(o.Z.Item,{label:"\u4E3B\u952E",children:p.primaryKey?"\u662F":"\u5426"}),(0,n.jsx)(o.Z.Item,{label:"\u975E\u7A7A",children:p.notNull?"\u662F":"\u5426"}),(0,n.jsx)(o.Z.Item,{label:"onUpdate",children:(E=p.onUpdate)!==null&&E!==void 0?E:"\u65E0"})]}),(0,n.jsxs)(D.Z,{split:(0,n.jsx)(se.Z,{type:"vertical"}),style:{fontSize:14},children:[(0,n.jsx)(L.Z.Text,{type:"secondary",children:l.createTime.toString().split("T")[0]}),(0,n.jsx)(g.Z,{type:"text",onClick:function(){(0,x.Lj)(l.id).then(function(B){q()(B.data),v.ZP.success("\u590D\u5236\u521B\u5EFA\u5B57\u6BB5 SQL \u6210\u529F")}).catch(function(B){v.ZP.error("\u590D\u5236\u5931\u8D25\uFF0C"+B.message)})},children:"\u590D\u5236\u8BED\u53E5"}),(0,n.jsx)(g.Z,{type:"text",onClick:function(){z(l.id),$(!0)},children:"\u4E3E\u62A5"}),V&&V.id===l.userId&&(0,n.jsx)(k.Z,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u4E48\uFF1F",onConfirm:function(){J(l.id)},children:(0,n.jsx)(g.Z,{type:"text",danger:!0,children:"\u5220\u9664"})})]})]},y)}}),(0,n.jsx)(_.Z,{visible:ne,reportedId:re,onClose:function(){$(!1)}})]})},r=R,s=t(91894),c=t(4107),e=t(14277),le=10,de=function(f){var w=f.title,ee=w===void 0?"\u5B57\u6BB5\u4FE1\u606F\u5217\u8868":w,G=f.needLogin,A=G===void 0?!1:G,b=f.showTag,K=b===void 0?!0:b,N=f.onLoad,W=f.onImport,ne=(0,d.useState)([]),$=u()(ne,2),te=$[0],O=$[1],re=(0,d.useState)(0),z=u()(re,2),ae=z[0],C=z[1],V=(0,d.useState)(!0),J=u()(V,2),U=J[0],l=J[1],y={current:1,pageSize:le,sortField:"createTime",sortOrder:"descend"},S=(0,d.useState)(y),j=u()(S,2),a=j[0],E=j[1],p=(0,m.useModel)("@@initialState"),T=p.initialState,B=T==null?void 0:T.loginUser,pe=function(){(0,x.ti)(i()(i()({},a),{},{reviewStatus:1})).then(function(I){O(I.data.records),C(I.data.total)}).catch(function(I){v.ZP.error("\u52A0\u8F7D\u5931\u8D25\uFF0C"+I.message)})};return(0,d.useEffect)(function(){A&&!B||(l(!0),N?N(a,O,C):pe(),l(!1))},[a]),(0,n.jsx)("div",{className:"field-info-card",children:(0,n.jsx)(s.Z,{title:ee,extra:(0,n.jsx)(m.Link,{to:"/",children:(0,n.jsx)(g.Z,{type:"primary",children:"\u53BB\u521B\u5EFA"})}),children:!A||B?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{children:(0,n.jsx)(c.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",enterButton:"\u641C\u7D22",onSearch:function(I){E(i()(i()({},y),{},{searchName:I}))}})}),(0,n.jsx)(r,{pagination:{total:ae,onChange:function(I){E(i()(i()({},a),{},{current:I})),window.scrollTo({top:0})},pageSize:le},dataList:te,loading:U,showTag:K,onImport:W})]}):(0,n.jsx)(e.Z,{description:(0,n.jsx)(m.Link,{to:"/user/login",children:(0,n.jsx)(g.Z,{type:"primary",ghost:!0,style:{marginTop:8},children:"\u8BF7\u5148\u767B\u5F55"})})})})})},ce=de},91154:function(oe,Q,t){t.d(Q,{G9:function(){return q},Jn:function(){return k},Lj:function(){return n},ap:function(){return D},lU:function(){return v},mX:function(){return x},ti:function(){return g}});var X=t(17061),i=t.n(X),H=t(17156),u=t.n(H),h=t(18036);function Y(r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/field_info/list",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function ie(r){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/field_info/my/list",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function x(r){return m.apply(this,arguments)}function m(){return m=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/my/add/list/page",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function v(r){return F.apply(this,arguments)}function F(){return F=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/my/list/page",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function g(r){return o.apply(this,arguments)}function o(){return o=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/list/page",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function D(r){return Z.apply(this,arguments)}function Z(){return Z=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/add",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function se(r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/field_info/get",{method:"GET",params:{id:s}}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function k(r){return M.apply(this,arguments)}function M(){return M=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/update",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function q(r){return d.apply(this,arguments)}function d(){return d=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/delete",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}function n(r){return R.apply(this,arguments)}function R(){return R=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/generate/sql",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}}}]);
